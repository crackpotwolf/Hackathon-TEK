@model IEnumerable<Hackathon_TEK.ModelsView.RegionsInfo>

<div class="card-body">
    <table id="RegionsTable" class="table table-fixed table-condensed">
        <thead>
            <tr>
                <th></th>
                <th scope="col">Регион</th>
                <th scope="col">Вероятность ЧС</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>Id</td>
                    <td id="@item.MapId" onClick="myfunction('@item.MapId')" style="cursor: pointer">@item.Name</td>
                    <td>@item.Probably</td>
                </tr>
            }
        </tbody>
    </table>
</div>

<script>
    initTable("RegionsTable", false, true, true, true, true, additionalOpt = opt);

    $('#RegionsTable').on('click', 'tbody tr', function (event)
    {
        $(this).addClass('regionsTable').siblings().removeClass('regionsTable');
    });

    function myfunction(region)
    {
        map.geoObjects.each(function (geoObject)
        {
            if (geoObject.properties.iso == region)
            {
                if (highlightedRegion != null)
                    highlightedRegion.options.set({ fillColor: oldCollor })

                // Выделим регион.
                oldCollor = geoObject.options._options.fillColor;
                geoObject.options.set({ fillOpacity: 1 });
                geoObject.options.set({ fillColor: '7B68EE' });
                highlightedRegion = geoObject;

                map.setBounds(geoObject.get(0).geometry.getBounds());

                var date = document.getElementById("date").value;

                $.ajax({
                    url: '@Url.Action("GetRegion", "Home")',
                    type: 'GET',
                    async: false,
                    data: { region: geoObject.properties.iso, date: date, region_name: geoObject.properties.region},
                    success: function (result) {
                        fillRegion(result);
                    },
                    complete: function () {
                    }
                });
            }
            else
                geoObject.options.set({ fillOpacity: 0.3 });
        });
    }
</script>